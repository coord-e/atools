#!/bin/bash
# -*- coding: utf-8 -*-
# vim:ft=sh :

ABS_DIR="$(dirname $( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd ))"

source $ABS_DIR/.envrc

PATH=$ABS_DIR/bin:$PATH

subcommand="${ATOOLS_SUBCOMMAND_PREFIX}$1"
shift

if type "$subcommand" >/dev/null 2>&1 ; then
    file $(which $subcommand) | grep -q 'shell script' \
      && . $subcommand "$@" \
      || $subcommand "$@"
else
    error "$subcommand is not a valid subcommand for atools."
fi
